import{_ as y,d as h,w as p}from"./app.7f449424.js";import{u as k}from"./useBaseMapEffect.f306c0df.js";import{b as C}from"./bindEvents.81d30a10.js";import{u as x}from"./useLife.84a8a567.js";function v(n){return Object.prototype.toString.call(n)==="[object String]"}let f=null;function P(){if(f!==null)return f;const n="//mapopen.bj.bcebos.com/cms/react-bmap/markers_new2x_fbb9e99.png";f={simple_red:new BMapGL.Icon(n,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),simple_blue:new BMapGL.Icon(n,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(454/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_red:new BMapGL.Icon(n,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,378/2),imageSize:new BMapGL.Size(600/2,600/2)}),loc_blue:new BMapGL.Icon(n,new BMapGL.Size(46/2,70/2),{imageOffset:new BMapGL.Size(400/2,450/2),imageSize:new BMapGL.Size(600/2,600/2)}),start:new BMapGL.Icon(n,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(400/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),end:new BMapGL.Icon(n,new BMapGL.Size(50/2,80/2),{imageOffset:new BMapGL.Size(450/2,278/2),imageSize:new BMapGL.Size(600/2,600/2)}),location:new BMapGL.Icon(n,new BMapGL.Size(28/2,40/2),{imageOffset:new BMapGL.Size(248/2,466/2),imageSize:new BMapGL.Size(600/2,600/2)})};for(let a=1;a<=10;a++)f["red"+a]=new BMapGL.Icon(n,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(a-1),0),imageSize:new BMapGL.Size(600/2,600/2)});for(let a=1;a<=10;a++)f["blue"+a]=new BMapGL.Icon(n,new BMapGL.Size(42/2,66/2),{imageOffset:new BMapGL.Size(42/2*(a-1),132/2),imageSize:new BMapGL.Size(600/2,600/2)});return f}const U=h({props:{position:null,offset:{default:()=>({x:0,y:0})},icon:null,enableMassClear:{type:Boolean,default:!0},enableDragging:{type:Boolean,default:!1},enableClicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{default:"pointer"},rotation:{default:0},title:{default:""},onClick:null,onDblclick:null,onMousedown:null,onMouseup:null,onMouseout:null,onMouseover:null,onRemove:null,onInfowindowclose:null,onInfowindowopen:null,onDragstart:null,onDragging:null,onDragend:null,onNightstick:null},emits:["initd","unload","click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],setup(n,{emit:a}){const o=n,{ready:m}=x();let i;k(e=>{const l=()=>{e.removeOverlay(i)},c=()=>{const{position:s,offset:t,enableMassClear:u,enableDragging:g,enableClicking:r,raiseOnDrag:b,draggingCursor:I,rotation:O,title:_,icon:D}=o,B={offset:new BMapGL.Size(t.x,t.y),enableMassClear:u,enableDragging:g,enableClicking:r,raiseOnDrag:b,draggingCursor:I,title:_};D&&(B.icon=w()),i=new BMapGL.Marker(new BMapGL.Point(s.lng,s.lat),B),M(O),e.addOverlay(i),C(o,a,i)};return p(()=>o.position,L,{deep:!0}),p(()=>o.icon,S,{deep:!0}),p(()=>o.offset,z,{deep:!0}),p(()=>o.enableDragging,d),p(()=>o.enableDragging,G),p(()=>o.rotation,M),c(),m(e),l});function w(){const e=P(),{icon:l}=o;if(v(l)&&e[l])return e[l];{const{anchor:c,imageOffset:s,imageSize:t,imageUrl:u,printImageUrl:g}=o.icon,r={imageSize:new BMapGL.Size(t.width,t.height)};return c&&(r.anchor=new BMapGL.Size(c.x,c.y)),s&&(r.imageOffset=new BMapGL.Size(s.x,s.y)),g&&(r.printImageUrl=g),new BMapGL.Icon(u,new BMapGL.Size(t.width,t.height),r)}}function L(e){i.setPosition(new BMapGL.Point(e.lng,e.lat))}function S(){i.setIcon(w())}function d(e){e?i.enableDragging():i.disableDragging()}function G(e){e?i.enableMassClear():i.disableMassClear()}function z(e){i.setOffset(new BMapGL.Size(e.x,e.y))}function M(e){i.setRotation(e)}return(e,l)=>null}});var q=y(U,[["__file","index.vue"]]);export{q as default};
